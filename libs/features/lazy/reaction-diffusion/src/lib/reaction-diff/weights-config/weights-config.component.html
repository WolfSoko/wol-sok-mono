@if (weights) {
  <mat-card appearance="raised">
    <mat-card-header>
      <mat-card-title>Cell Weights Config</mat-card-title>
      <mat-card-subtitle
        >The weights of the neighbouring cells used for
        calculation</mat-card-subtitle
      >
    </mat-card-header>
    <mat-card-content>
      <form class="weightInput">
        <div class="topWeights">
          <mat-form-field>
            <mat-label>top left</mat-label>
            <input
              matInput
              placeholder="topLeft"
              type="number"
              step="0.005"
              name="topLeft"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.topLeft"
            />
          </mat-form-field>
          <mat-form-field>
            <mat-label>top center</mat-label>
            <input
              matInput
              placeholder="topCenter"
              type="number"
              step="0.005"
              name="topCenter"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.topCenter"
            />
          </mat-form-field>
          <mat-form-field>
            <mat-label>top right</mat-label>
            <input
              matInput
              placeholder="topRight"
              type="number"
              step="0.005"
              name="topRight"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.topRight"
            />
          </mat-form-field>
        </div>
        <div class="centerWeights">
          <mat-form-field>
            <mat-label>left</mat-label>
            <input
              matInput
              placeholder="left"
              type="number"
              step="0.005"
              name="left"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.left"
            />
          </mat-form-field>
          <mat-form-field>
            <mat-label>center</mat-label>
            <input
              matInput
              placeholder="center"
              type="number"
              step="0.005"
              name="center"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.center"
            />
          </mat-form-field>
          <mat-form-field>
            <mat-label>right</mat-label>
            <input
              matInput
              placeholder="right"
              type="number"
              step="0.005"
              name="right"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.right"
            />
          </mat-form-field>
        </div>
        <div class="bottomWeights">
          <mat-form-field>
            <mat-label>bottom left</mat-label>
            <input
              matInput
              placeholder="bottomLeft"
              type="number"
              step="0.005"
              name="bottomLeft"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.bottomLeft"
            />
          </mat-form-field>
          <mat-form-field>
            <mat-label>bottom center</mat-label>
            <input
              matInput
              placeholder="bottomCenter"
              type="number"
              step="0.005"
              name="bottomCenter"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.bottomCenter"
            />
          </mat-form-field>
          <mat-form-field>
            <mat-label>bottom right</mat-label>
            <input
              matInput
              placeholder="bottomRight"
              type="number"
              step="0.005"
              name="bottomRight"
              min="-1.000"
              max="1.000"
              (change)="weightChanged()"
              [(ngModel)]="weights.bottomRight"
            />
          </mat-form-field>
        </div>
        @if (sumOfWeightsAndValidity$ | async; as sumOfWeights) {
          <div class="sumCheck">
            @if (!sumOfWeights.valid) {
              <mat-icon color="warn">cancel</mat-icon>
            }
            @if (sumOfWeights.valid) {
              <mat-icon color="accent">check</mat-icon>
            }
            <span>The current sum is: {{ sumOfWeights.sum }}</span>
          </div>
        }
      </form>
    </mat-card-content>
  </mat-card>
}
