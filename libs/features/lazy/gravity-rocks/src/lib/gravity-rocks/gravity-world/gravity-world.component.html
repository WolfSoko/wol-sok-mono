<div class="sim-layout">
  <mat-card appearance="raised" class="gravitational-force-card-controls">
    <mat-card-header>
      <mat-card-title>Play with the values</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="form" class="configuration">
        <p>
          <mat-form-field appearance="outline">
            <mat-label>Gravitational Force</mat-label>
            <input matInput type="number" formControlName="gravitationalConstant" />
            <mat-hint>The gravitational constant</mat-hint>
          </mat-form-field>
        </p>
        <p>
          <mat-form-field appearance="outline">
            <mat-label>Mass of Sun</mat-label>
            <input matInput type="number" formControlName="massOfSun" />
            <mat-hint>The more mass the more gravitational attraction</mat-hint>
          </mat-form-field>
        </p>
        <div>
          <button
            data-qa="cta-start"
            mat-raised-button
            [color]="running() ? 'accent' : 'primary'"
            (click)="toggleSim()"
          >
            {{ running() ? 'Pause' : 'Start' }}
          </button>
          <button data-qa="cta-reset" mat-raised-button color="accent" (click)="reset()">Reset</button>
        </div>
      </form>
      <mat-list>
        <mat-toolbar id="infos">Infos</mat-toolbar>
        <mat-list-item>
          <span class="planetCount"> PlanetCount = 1 </span>
        </mat-list-item>
        <mat-list-item *ngFor="let planet of planets(); let i = index">
          <span class="planetCount">
            Planet {{ i + 1 }}: x= {{ planet.pos.x | number: '1.0-0' }}, y= {{ planet.pos.y | number: '1.0-0' }}
          </span>
        </mat-list-item>
        <!--<mat-list-item>
          <span class="planetCount"> drag.x = {{ (drag$ | async)?.x }} drag.y = {{ (drag$ | async)?.y }} </span>
        </mat-list-item>-->
      </mat-list>
    </mat-card-content>
  </mat-card>
  <mat-card appearance="raised" class="gravitational-force-card">
    <mat-toolbar color="primary">See the action</mat-toolbar>
    <mat-card-content (wsSharedUiElemResized)="resize($event)" [debounceTime]="300">
      <svg
        #svgWorld
        class="world-svg"
        (mousedown)="mouseDown($event)"
        (mousemove)="mouseMove($event)"
        (mouseup)="mouseUp($event)"
        [attr.viewBox]="'0 0 ' + MAX_DIM.x + ' ' + MAX_DIM.y"
      >
        <g>
          <circle
            *ngFor="let planet of planets()"
            [attr.cx]="planet.pos.x"
            [attr.cy]="planet.pos.y"
            [attr.r]="planet.mass / 10"
            fill="red"
          ></circle>
          <circle id="sun" [attr.cx]="sun.pos.x" [attr.cy]="sun.pos.y" r="25" fill="yellow"></circle>
        </g>
      </svg>
    </mat-card-content>
  </mat-card>
</div>
