<div class="sim-layout">
  <mat-card appearance="raised" class="gravitational-force-card-controls">
    <mat-card-header>
      <mat-card-title>Play with the values</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="form" class="configuration">
        <p>
          <mat-form-field appearance="outline">
            <mat-label>Gravitational Force</mat-label>
            <input matInput type="number" formControlName="gravitationalConstant" />
            <mat-hint>The gravitational constant</mat-hint>
          </mat-form-field>
        </p>
        <p>
          <mat-form-field appearance="outline">
            <mat-label>Mass of Sun</mat-label>
            <input matInput type="number" formControlName="massOfSun" />
            <mat-hint>The more mass the more gravitational attraction</mat-hint>
          </mat-form-field>
        </p>
        <ng-container *wsLet="running$ | async as running">
          <button mat-raised-button [color]="running ? 'accent' : 'primary'" (click)="toggleSim(running)">
            {{ running ? 'Pause' : 'Start' }}
          </button>
        </ng-container>
      </form>
      <mat-list>
        <mat-toolbar id="infos">Infos</mat-toolbar>
        <mat-list-item>
          <span class="planetCount"> PlanetCount = 1 </span>
        </mat-list-item>
        <mat-list-item>
          <span class="planetCount"> PlanetCoords.x = {{ x$ | async }} PlanetCoords.y = {{ y$ | async }} </span>
        </mat-list-item>
        <mat-list-item>
          <span class="planetCount"> drag.x = {{ (drag$ | async)?.x }} drag.y = {{ (drag$ | async)?.y }} </span>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
  </mat-card>
  <mat-card appearance="raised" class="gravitational-force-card">
    <mat-toolbar color="primary">See the action</mat-toolbar>
    <mat-card-content (wsSharedUiElemResized)="resize($event)" [debounceTime]="300">
      <svg
        #svgWorld
        class="world-svg"
        (mousedown)="mouseDown($event)"
        (mousemove)="mouseMove($event)"
        (mouseup)="mouseUp($event)"
        [attr.viewBox]="'0 0 ' + MAX_DIM.x + ' ' + MAX_DIM.y"
      >
        <g>
          <circle [attr.cx]="x$ | async" [attr.cy]="y$ | async" r="10" fill="red"></circle>
          <circle id="sun" [attr.cx]="mouseX$ | async" [attr.cy]="mouseY$ | async" r="25" fill="yellow"></circle>
        </g>
      </svg>
    </mat-card-content>
  </mat-card>
</div>
